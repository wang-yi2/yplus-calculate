# -*- coding: utf-8 -*-
"""
ç™¼å¸ƒç³»çµ±å¿«é€Ÿæ¼”ç¤º
==================

é€™å€‹æ–‡ä»¶å±•ç¤ºå¦‚ä½•ä½¿ç”¨è‡ªå‹•ç™¼å¸ƒç³»çµ±
"""

# ç³»çµ±å·²æº–å‚™å¥½é€²è¡Œç™¼å¸ƒ
# ç•¶å‰ç‰ˆæœ¬ï¼šv1.0.0

print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     CFD y+ è¨ˆç®—å·¥å…· - è‡ªå‹•ç™¼å¸ƒç³»çµ±å·²éƒ¨ç½²                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ æ ¸å¿ƒçµ„ä»¶ï¼š
  âœ… release.py    - Python ç™¼å¸ƒé‚è¼¯ï¼ˆ720+ è¡Œï¼‰
  âœ… release.ps1   - PowerShell å•Ÿå‹•è…³æœ¬
  âœ… release.bat   - Windows æ‰¹è™•ç†å¿«é€Ÿå•Ÿå‹•
  âœ… CLAUDE.md     - å®Œæ•´æ–‡æª”ï¼ˆ350+ è¡Œï¼‰

ğŸ¯ ä¸»è¦åŠŸèƒ½ï¼š
  1. è‡ªå‹•åŸ·è¡Œ pytest æ¸¬è©¦
  2. Lint æª¢æŸ¥å’Œä¿®å¾©ï¼ˆruff format/checkï¼‰
  3. è‡ªå‹•æª¢æ¸¬è®Šæ›´é¡å‹
  4. æ›´æ–°ç‰ˆæœ¬è™Ÿï¼ˆSemantic Versioningï¼‰
  5. å‰µå»ºç‰ˆæœ¬æ¨™ç±¤å’Œæäº¤
  6. æ¨é€åˆ° GitHub

ğŸ“‹ å¿«é€Ÿé–‹å§‹ï¼š

  Windows (PowerShell):
    .\.venv314\Scripts\Activate.ps1
    .\release.ps1

  Windows (æ‰¹è™•ç†):
    release.bat

  ä»»ä½•å¹³å° (Python):
    uv run python release.py

ğŸ“š è©³ç´°æ–‡æª”ï¼š
  see CLAUDE.md

ğŸš€ ç‰ˆæœ¬è¦å‰‡ï¼ˆSemantic Versioningï¼‰ï¼š

  fix: ä¿®å¾© â†’ PATCH
    git commit -m "fix: ä¿®å¾© y+ è¨ˆç®—èª¤å·®"
    ç‰ˆæœ¬ï¼š1.0.0 â†’ 1.0.1

  feat: æ–°åŠŸèƒ½ â†’ MINOR
    git commit -m "feat: æ–°å¢æº«åº¦ä¿®æ­£å› å­"
    ç‰ˆæœ¬ï¼š1.0.0 â†’ 1.1.0

  breaking: é‡å¤§è®Šæ›´ â†’ MAJOR
    git commit -m "breaking: é‡æ§‹è¨ˆç®—æ ¸å¿ƒ"
    ç‰ˆæœ¬ï¼š1.0.0 â†’ 2.0.0

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ å…¸å‹ç™¼å¸ƒå·¥ä½œæµç¨‹ï¼š

1. é€²è¡Œé–‹ç™¼å·¥ä½œ
   $ git add .
   $ git commit -m "feat: æ–°åŠŸèƒ½æè¿°"

2. åŸ·è¡Œç™¼å¸ƒ
   $ .\release.ps1

3. ç³»çµ±è‡ªå‹•åŸ·è¡Œï¼š
   âœ“ åŸ·è¡Œ pytest æ¸¬è©¦
   âœ“ Lint æª¢æŸ¥èˆ‡ä¿®å¾©
   âœ“ åµæ¸¬è®Šæ›´é¡å‹ (feat: â†’ MINOR)
   âœ“ æ›´æ–°ç‰ˆæœ¬ (1.0.0 â†’ 1.1.0)
   âœ“ æäº¤è®Šæ›´ âœ¨ æ–°åŠŸèƒ½ç™¼å¸ƒ: v1.1.0
   âœ“ å‰µå»ºæ¨™ç±¤ v1.1.0
   âœ“ æ¨é€åˆ° GitHub

4. å®Œæˆï¼ğŸ“¦
   æŸ¥çœ‹ GitHub releases é é¢ç¢ºèªç™¼å¸ƒ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  é‡è¦æé†’ï¼š

  â€¢ ç¢ºä¿è™›æ“¬ç’°å¢ƒå·²å•Ÿå‹•
  â€¢ ç¢ºä¿æ‰€æœ‰æ¸¬è©¦é€šé
  â€¢ ç¢ºä¿ git å€‰åº«ç‹€æ…‹æ­£å¸¸
  â€¢ ç¢ºä¿ GitHub é ç«¯å·²é…ç½®

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
""")

# ç³»çµ±ç‹€æ…‹æª¢æŸ¥
import subprocess
import sys

def check_system():
    """æª¢æŸ¥ç³»çµ±æ˜¯å¦æº–å‚™å¥½ç™¼å¸ƒ"""
    checks = []
    
    # æª¢æŸ¥ Git
    try:
        result = subprocess.run(["git", "status"], capture_output=True)
        checks.append(("Git å€‰åº«", result.returncode == 0))
    except:
        checks.append(("Git å€‰åº«", False))
    
    # æª¢æŸ¥ Remote
    try:
        result = subprocess.run(["git", "remote", "-v"], capture_output=True, text=True)
        has_remote = "origin" in result.stdout
        checks.append(("GitHub é ç«¯", has_remote))
    except:
        checks.append(("GitHub é ç«¯", False))
    
    # æª¢æŸ¥è™›æ“¬ç’°å¢ƒ
    venv_path = ".venv314"
    checks.append(("è™›æ“¬ç’°å¢ƒ (.venv314)", __import__("pathlib").Path(venv_path).exists()))
    
    # æª¢æŸ¥ Python
    checks.append(("Python 3.10+", sys.version_info >= (3, 10)))
    
    print("\nğŸ” ç³»çµ±ç‹€æ…‹æª¢æŸ¥ï¼š\n")
    all_ok = True
    for check, status in checks:
        symbol = "âœ…" if status else "âŒ"
        print(f"  {symbol} {check}")
        if not status:
            all_ok = False
    
    print()
    if all_ok:
        print("âœ… ç³»çµ±å·²æº–å‚™å¥½é€²è¡Œç™¼å¸ƒï¼")
    else:
        print("âš ï¸  è«‹å…ˆä¿®å¾©ä¸Šè¿°å•é¡Œå†é€²è¡Œç™¼å¸ƒ")
    
    return all_ok

if __name__ == "__main__":
    check_system()
